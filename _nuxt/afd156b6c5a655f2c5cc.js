(window.webpackJsonp=window.webpackJsonp||[]).push([[60,816,817,818,819,820],{1e3:function(e,t,o){e.exports=o.p+"img/cd7ee9e.png"},1001:function(e,t,o){e.exports=o.p+"img/f1f702a.png"},1002:function(e,t,o){e.exports=o.p+"img/47d7bbe.png"},1003:function(e,t,o){e.exports=o.p+"img/02a346b.png"},1182:function(e,t,o){const r={render:function(){this.$createElement;return this._self._c,this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"frontmatter-markdown"},[r("h2",{attrs:{id:"背景"}},[e._v("背景")]),e._v(" "),r("p",[e._v("刚安装的Android Studio 3.1.0.0，没有内置SDK。手动安装SDK后新建项目却一直显示Gradle同步失败")]),e._v(" "),r("h2",{attrs:{id:"解决connection-time-out错误"}},[e._v("解决connection time out错误")]),e._v(" "),r("p",[e._v("AS自动生成的"),r("code",{pre:!0},[e._v("gradle-wrapper.properties")]),e._v("文件中有一项"),r("code",{pre:!0},[e._v("distributionUrl")]),e._v("，原本的值为"),r("code",{pre:!0},[e._v("https\\://services.gradle.org/distributions/gradle-4.4-all.zip")]),e._v("（也就是说我的gradle版本为4.4），但是登录gradle的官方网站可以发现gradle的产品下载链接更新了，把原网址中的"),r("code",{pre:!0},[e._v("services")]),e._v("改为"),r("code",{pre:!0},[e._v("downloads")]),e._v("即可")]),e._v(" "),r("p",[e._v("也就是说我的文件内容更改之后应该是")]),e._v(" "),r("pre",[r("code",{pre:!0},[e._v("distributionUrl=https\\://downloads.gradle.org/distributions/gradle-4.4-all.zip\n")])]),e._v(" "),r("p",[e._v("一定要注意此处"),r("code",{pre:!0},[e._v("https")]),e._v("后面的冒号前面"),r("strong",[e._v("有一个反斜杠")])]),e._v(" "),r("h2",{attrs:{id:"解决connection-refused错误"}},[e._v("解决connection refused错误")]),e._v(" "),r("p",[e._v("展开错误信息可以发现错误详情是")]),e._v(" "),r("pre",[r("code",{pre:!0},[e._v("Connect to 127.0.0.1:1080 [/127.0.0.1] failed: Connection refused: connect\n")])]),e._v(" "),r("p",[e._v("原因是"),r("code",{pre:!0},[e._v("gradle.properties")]),e._v("文件中使用了代理。我的"),r("code",{pre:!0},[e._v("gradle.properties")]),e._v("文件含有以下内容")]),e._v(" "),r("pre",[r("code",{pre:!0},[e._v("systemProp.http.proxyHost=127.0.0.1\nsystemProp.https.proxyPort=8787\nsystemProp.https.proxyHost=127.0.0.1\nsystemProp.http.proxyPort=8787\n")])]),e._v(" "),r("p",[e._v("把它们全部注释掉，即在每一行前面加上井号"),r("code",{pre:!0},[e._v("#")])]),e._v(" "),r("pre",[r("code",{pre:!0},[e._v("#systemProp.http.proxyHost=127.0.0.1\n#systemProp.https.proxyPort=8787\n#systemProp.https.proxyHost=127.0.0.1\n#systemProp.http.proxyPort=8787\n")])]),e._v(" "),r("h2",{attrs:{id:"更改hosts以访问dlgooglecom"}},[e._v("更改Hosts以访问dl.google.com")]),e._v(" "),r("p",[e._v("如果没有魔法上网，上面的问题解决后会发现"),r("code",{pre:!0},[e._v("dl.google.com")]),e._v("一直访问不上")]),e._v(" "),r("p",[e._v("通过更改Hosts，把"),r("code",{pre:!0},[e._v("dl.google.com")]),e._v("的IP地址解析到国内的谷歌代理服务器即可")]),e._v(" "),r("p",[e._v("使用站长工具的"),r("a",{attrs:{href:"http://ping.chinaz.com/"}},[e._v("超级ping")]),e._v("，取消选择海外，ping一下"),r("code",{pre:!0},[e._v("dl.google.com")])]),e._v(" "),r("p",[r("img",{attrs:{src:o(999),alt:"12-3"}})]),e._v(" "),r("p",[e._v("我得到了如下结果")]),e._v(" "),r("p",[r("img",{attrs:{src:o(1e3),alt:"12-4"}})]),e._v(" "),r("p",[e._v("北京谷翔信息技术有限公司的BGP结点。没毛病")]),e._v(" "),r("p",[e._v("我选择了第一个IP地址，用本机的cmd来ping一下试试")]),e._v(" "),r("p",[r("img",{attrs:{src:o(1001),alt:"12-5"}})]),e._v(" "),r("p",[e._v("能ping通，妙啊。接下来只要把这个IP地址写入Hosts文件就行了")]),e._v(" "),r("p",[r("strong",[e._v("管理员身份")]),e._v("启动记事本，打开Hosts，添加如下行。这里的IP地址不一定是我这个IP地址，读者可以自行选择一个自己能ping通的IP地址")]),e._v(" "),r("pre",[r("code",{pre:!0},[e._v("203.208.41.169 dl.google.com\n")])]),e._v(" "),r("p",[e._v("这样就可以访问"),r("code",{pre:!0},[e._v("dl.google.com")]),e._v("了")]),e._v(" "),r("h2",{attrs:{id:"最后"}},[e._v("最后")]),e._v(" "),r("p",[e._v("再次同步Gradle，可能还会出现如下错误（因为我的AS是刚装的，很多组件都没有下载）")]),e._v(" "),r("p",[r("img",{attrs:{src:o(1002),alt:"12-1"}})]),e._v(" "),r("p",[e._v("因为我们已经可以访问"),r("code",{pre:!0},[e._v("dl.google.com")]),e._v("了，直接点击错误中的蓝色链接进行下载安装即可。可能会多次出现类似的组件缺失的错误，都点击蓝色链接全部下载安装即可")]),e._v(" "),r("p",[e._v("最后，Gradle终于同步成功")]),e._v(" "),r("p",[r("img",{attrs:{src:o(1003),alt:"12-2"}})]),e._v(" "),r("p",[e._v("参考：")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://blog.csdn.net/Rainminism/article/details/79713788"}},[e._v("Android Studio错误：Connect to 127.0.0.1:1080 [/127.0.0.1] failed: Connection refused: connect")])]),e._v(" "),r("li",[r("a",{attrs:{href:"https://blog.csdn.net/huweijian5/article/details/45867917"}},[e._v("解决连不上dl.google.com和dl-ssl.google.com")])])])])}]};e.exports={attributes:{date:"2018-07-08T00:00:00.000Z",title:"Android Studio解决Gradle同步失败的相关问题",tags:["android"]},vue:{render:r.render,staticRenderFns:r.staticRenderFns,component:{data:function(){return{templateRender:null}},render:function(e){return this.templateRender?this.templateRender():e("div","Rendering")},created:function(){this.templateRender=r.render,this.$options.staticRenderFns=r.staticRenderFns}}}}},999:function(e,t,o){e.exports=o.p+"img/34a680a.png"}}]);