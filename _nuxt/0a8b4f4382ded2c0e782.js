(window.webpackJsonp=window.webpackJsonp||[]).push([[60,816,817,818,819,820],{1003:function(t,e,n){t.exports=n.p+"img/34a680a.png"},1004:function(t,e,n){t.exports=n.p+"img/cd7ee9e.png"},1005:function(t,e,n){t.exports=n.p+"img/f1f702a.png"},1006:function(t,e,n){t.exports=n.p+"img/47d7bbe.png"},1007:function(t,e,n){t.exports=n.p+"img/02a346b.png"},1186:function(t,e,n){const o={render:function(){this.$createElement;return this._self._c,this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"frontmatter-markdown"},[o("h2",{attrs:{id:"背景"}},[t._v("背景")]),t._v(" "),o("p",[t._v("刚安装的Android Studio 3.1.0.0，没有内置SDK。手动安装SDK后新建项目却一直显示Gradle同步失败")]),t._v(" "),o("h2",{attrs:{id:"解决connection-time-out错误"}},[t._v("解决connection time out错误")]),t._v(" "),o("p",[t._v("AS自动生成的"),o("code",{pre:!0},[t._v("gradle-wrapper.properties")]),t._v("文件中有一项"),o("code",{pre:!0},[t._v("distributionUrl")]),t._v("，原本的值为"),o("code",{pre:!0},[t._v("https\\://services.gradle.org/distributions/gradle-4.4-all.zip")]),t._v("（也就是说我的gradle版本为4.4），但是登录gradle的官方网站可以发现gradle的产品下载链接更新了，把原网址中的"),o("code",{pre:!0},[t._v("services")]),t._v("改为"),o("code",{pre:!0},[t._v("downloads")]),t._v("即可")]),t._v(" "),o("p",[t._v("也就是说我的文件内容更改之后应该是")]),t._v(" "),o("pre",{staticClass:"language-bash"},[o("code",{staticClass:"language-bash"},[o("span",{staticClass:"token assign-left variable"},[t._v("distributionUrl")]),o("span",{staticClass:"token operator"},[t._v("=")]),t._v("https"),o("span",{staticClass:"token punctuation"},[t._v("\\")]),t._v("://downloads.gradle.org/distributions/gradle-4.4-all.zip\n")])]),t._v(" "),o("p",[t._v("一定要注意此处"),o("code",{pre:!0},[t._v("https")]),t._v("后面的冒号前面"),o("strong",[t._v("有一个反斜杠")])]),t._v(" "),o("h2",{attrs:{id:"解决connection-refused错误"}},[t._v("解决connection refused错误")]),t._v(" "),o("p",[t._v("展开错误信息可以发现错误详情是")]),t._v(" "),o("pre",{staticClass:"language-bash"},[o("code",{staticClass:"language-bash"},[t._v("Connect to "),o("span",{staticClass:"token number"},[t._v("127.0")]),t._v(".0.1:1080 "),o("span",{staticClass:"token punctuation"},[t._v("[")]),t._v("/127.0.0.1"),o("span",{staticClass:"token punctuation"},[t._v("]")]),t._v(" failed: Connection refused: connect\n")])]),t._v(" "),o("p",[t._v("原因是"),o("code",{pre:!0},[t._v("gradle.properties")]),t._v("文件中使用了代理。我的"),o("code",{pre:!0},[t._v("gradle.properties")]),t._v("文件含有以下内容")]),t._v(" "),o("pre",{staticClass:"language-bash"},[o("code",{staticClass:"language-bash"},[t._v("systemProp.http.proxyHost"),o("span",{staticClass:"token operator"},[t._v("=")]),o("span",{staticClass:"token number"},[t._v("127.0")]),t._v(".0.1\nsystemProp.https.proxyPort"),o("span",{staticClass:"token operator"},[t._v("=")]),o("span",{staticClass:"token number"},[t._v("8787")]),t._v("\nsystemProp.https.proxyHost"),o("span",{staticClass:"token operator"},[t._v("=")]),o("span",{staticClass:"token number"},[t._v("127.0")]),t._v(".0.1\nsystemProp.http.proxyPort"),o("span",{staticClass:"token operator"},[t._v("=")]),o("span",{staticClass:"token number"},[t._v("8787")]),t._v("\n")])]),t._v(" "),o("p",[t._v("把它们全部注释掉，即在每一行前面加上井号"),o("code",{pre:!0},[t._v("#")])]),t._v(" "),o("pre",{staticClass:"language-bash"},[o("code",{staticClass:"language-bash"},[o("span",{staticClass:"token comment"},[t._v("#systemProp.http.proxyHost=127.0.0.1")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("#systemProp.https.proxyPort=8787")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("#systemProp.https.proxyHost=127.0.0.1")]),t._v("\n"),o("span",{staticClass:"token comment"},[t._v("#systemProp.http.proxyPort=8787")]),t._v("\n")])]),t._v(" "),o("h2",{attrs:{id:"更改hosts以访问dlgooglecom"}},[t._v("更改Hosts以访问dl.google.com")]),t._v(" "),o("p",[t._v("如果没有魔法上网，上面的问题解决后会发现"),o("code",{pre:!0},[t._v("dl.google.com")]),t._v("一直访问不上")]),t._v(" "),o("p",[t._v("通过更改Hosts，把"),o("code",{pre:!0},[t._v("dl.google.com")]),t._v("的IP地址解析到国内的谷歌代理服务器即可")]),t._v(" "),o("p",[t._v("使用站长工具的"),o("a",{attrs:{href:"http://ping.chinaz.com/"}},[t._v("超级ping")]),t._v("，取消选择海外，ping一下"),o("code",{pre:!0},[t._v("dl.google.com")])]),t._v(" "),o("p",[o("img",{attrs:{src:n(1003),alt:"12-3"}})]),t._v(" "),o("p",[t._v("我得到了如下结果")]),t._v(" "),o("p",[o("img",{attrs:{src:n(1004),alt:"12-4"}})]),t._v(" "),o("p",[t._v("北京谷翔信息技术有限公司的BGP结点。没毛病")]),t._v(" "),o("p",[t._v("我选择了第一个IP地址，用本机的cmd来ping一下试试")]),t._v(" "),o("p",[o("img",{attrs:{src:n(1005),alt:"12-5"}})]),t._v(" "),o("p",[t._v("能ping通，妙啊。接下来只要把这个IP地址写入Hosts文件就行了")]),t._v(" "),o("p",[o("strong",[t._v("管理员身份")]),t._v("启动记事本，打开Hosts，添加如下行。这里的IP地址不一定是我这个IP地址，读者可以自行选择一个自己能ping通的IP地址")]),t._v(" "),o("pre",{staticClass:"language-bash"},[o("code",{staticClass:"language-bash"},[o("span",{staticClass:"token number"},[t._v("203.208")]),t._v(".41.169 dl.google.com\n")])]),t._v(" "),o("p",[t._v("这样就可以访问"),o("code",{pre:!0},[t._v("dl.google.com")]),t._v("了")]),t._v(" "),o("h2",{attrs:{id:"最后"}},[t._v("最后")]),t._v(" "),o("p",[t._v("再次同步Gradle，可能还会出现如下错误（因为我的AS是刚装的，很多组件都没有下载）")]),t._v(" "),o("p",[o("img",{attrs:{src:n(1006),alt:"12-1"}})]),t._v(" "),o("p",[t._v("因为我们已经可以访问"),o("code",{pre:!0},[t._v("dl.google.com")]),t._v("了，直接点击错误中的蓝色链接进行下载安装即可。可能会多次出现类似的组件缺失的错误，都点击蓝色链接全部下载安装即可")]),t._v(" "),o("p",[t._v("最后，Gradle终于同步成功")]),t._v(" "),o("p",[o("img",{attrs:{src:n(1007),alt:"12-2"}})]),t._v(" "),o("p",[t._v("参考：")]),t._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://blog.csdn.net/Rainminism/article/details/79713788"}},[t._v("Android Studio错误：Connect to 127.0.0.1:1080 [/127.0.0.1] failed: Connection refused: connect")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://blog.csdn.net/huweijian5/article/details/45867917"}},[t._v("解决连不上dl.google.com和dl-ssl.google.com")])])])])}]};t.exports={attributes:{date:"2018-07-08T00:00:00.000Z",title:"Android Studio解决Gradle同步失败的相关问题",tags:["android"]},vue:{render:o.render,staticRenderFns:o.staticRenderFns,component:{data:function(){return{templateRender:null}},render:function(t){return this.templateRender?this.templateRender():t("div","Rendering")},created:function(){this.templateRender=o.render,this.$options.staticRenderFns=o.staticRenderFns}}}}}}]);